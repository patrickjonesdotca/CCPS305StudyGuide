<!DOCTYPE html>
<html class="jsEnabled togglingEnabled" dir="ltr" lang="en"><head>
		<title>Memory pool - Wikipedia, the free encyclopedia</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta name="robots" content="noindex,nofollow">		<link rel="stylesheet" href="Memory_pool_files/load.css" type="text/css" media="all">		<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
		<link rel="apple-touch-icon" href="http://en.wikipedia.org/apple-touch-icon.png">		<script type="text/javascript">
			if( typeof mw === 'undefined' ) {
				mw = {};
			}
			var mwMobileFrontendConfig = {"messages":{"expand-section":"Show","collapse-section":"Hide","remove-results":"Back...","mobile-frontend-search-noresults":"No article titles match your search. Change your search, or press the keyboard search button to search inside articles.","mobile-frontend-search-help":"Type search term above and matching article titles will appear here.","contents-heading":"Contents","language-heading":"Read this article in","mobile-frontend-close-section":"Close this section","mobile-frontend-language-header":"This article is available in 4 languages","mobile-frontend-language-footer":"<a href=\"\/wiki\/Special:Special:MobileOptions\/Language\">Wikipedia is available in other languages.<\/a>","mobile-frontend-language-site-choose":"Search language","mobile-frontend-language-site-nomatches":"No matching languages"},"settings":{"scriptPath":"\/w","useFormatCookieName":"mf_mobileFormat","useFormatCookieDuration":-1,"useFormatCookieDomain":"en.wikipedia.org","useFormatCookiePath":"\/","stopMobileRedirectCookieName":"stopMobileRedirect","stopMobileRedirectCookieDuration":15552000,"stopMobileRedirectCookieDomain":".wikipedia.org","hookOptions":""}};
			document.documentElement.className = 'jsEnabled page-loading';		</script>
		<link rel="canonical" href="http://en.wikipedia.org/wiki/Memory_pool">
	</head>
	<body class="mobile mw-mf-checkboxes">
							<div id="mw-mf-header">
					<form id="mw-mf-searchForm" action="/w/index.php" class="search_bar" method="get">
							<img alt="Logo" id="mw-mf-logo" src="Memory_pool_files/W_logo_for_Mobile_Frontend.gif" width="35" height="22">
						<input value="Special:Search" name="title" type="hidden">
			<div id="mw-mf-sq" class="divclearable">
				<input name="search" id="mw-mf-search" size="22" autocomplete="off" maxlength="1024" class="search" placeholder="Type your search here..." type="search">
				<img src="Memory_pool_files/blank.gif" alt="Clear" class="clearlink" id="mw-mf-clearsearch" title="Clear">
			</div>
						<button id="goButton" class="goButton" type="submit">
				<img src="Memory_pool_files/blank.gif" alt="Go" title="Go">
			</button>
					</form>
									<div class="nav" id="nav">
				<div id="mw-mf-language-selection">
		Language:<br>
		<select id="languageselection"><option value="http://en.wikipedia.org/wiki/Memory_pool" selected="selected">English</option><option value="//de.m.wikipedia.org/wiki/Speicherpool">Deutsch</option><option value="//ko.m.wikipedia.org/wiki/%EB%A9%94%EB%AA%A8%EB%A6%AC_%ED%92%80">한국어</option><option value="//zh.m.wikipedia.org/wiki/%E8%A8%98%E6%86%B6%E6%B1%A0">中文</option></select>
	</div><br>
			<a href="http://en.m.wikipedia.org/wiki/Main_Page" id="homeButton" class="button">Home</a>
			<a href="http://en.m.wikipedia.org/wiki/Special:Random" id="randomButton" class="button">Random</a>
			</div>
		</div>
				<div id="results"><ul class="suggestions-results" title="No Results"><li class="suggestions-result">Type search term above and matching article titles will appear here.</li></ul></div>
		<div class="show" id="content_wrapper">
				<div id="content">
			<h1 id="firstHeading">Memory pool</h1>			
<table class="metadata plainlinks ambox ambox-style ambox-More_footnotes" style=""><tbody><tr>
<td class="mbox-image">
<div style="width: 52px;"><img alt="" src="Memory_pool_files/40px-Text_document_with_red_question_mark.png" width="40" height="40"></div>
</td>
<td class="mbox-text" style=""><span class="mbox-text-span">This article includes a <a href="http://en.m.wikipedia.org/wiki/Wikipedia:Citing_sources" title="Wikipedia:Citing sources">list of references</a>, but <b>its sources remain unclear because it has insufficient <a href="http://en.m.wikipedia.org/wiki/Wikipedia:INCITE" title="Wikipedia:INCITE" class="mw-redirect">inline citations</a></b>. <span class="hide-when-compact">Please help to <a href="http://en.m.wikipedia.org/wiki/Wikipedia:WikiProject_Fact_and_Reference_Check" title="Wikipedia:WikiProject Fact and Reference Check">improve</a> this article by <a href="http://en.m.wikipedia.org/wiki/Wikipedia:When_to_cite" title="Wikipedia:When to cite">introducing</a> more precise citations.</span> <small><i>(April 2011)</i></small> </span></td>
</tr></tbody></table>
<table class="metadata plainlinks ambox ambox-content ambox-Refimprove" style=""><tbody><tr>
<td class="mbox-image">
<div style="width: 52px;"><img alt="" src="Memory_pool_files/50px-Question_book-new.png" width="50" height="39"></div>
</td>
<td class="mbox-text" style=""><span class="mbox-text-span">This article <b>needs additional <a href="http://en.m.wikipedia.org/wiki/Wikipedia:Citing_sources#Inline_citations" title="Wikipedia:Citing sources">citations</a> for <a href="http://en.m.wikipedia.org/wiki/Wikipedia:Verifiability" title="Wikipedia:Verifiability">verification</a></b>. <span class="hide-when-compact">Please help <a class="external text" href="http://en.wikipedia.org/w/index.php?title=Memory_pool&amp;action=edit">improve this article</a> by adding citations to <a href="http://en.m.wikipedia.org/wiki/Wikipedia:Identifying_reliable_sources" title="Wikipedia:Identifying reliable sources">reliable sources</a>. Unsourced material may be <a href="http://en.m.wikipedia.org/wiki/Template:Citation_needed" title="Template:Citation needed">challenged</a> and <a href="http://en.m.wikipedia.org/wiki/Wikipedia:Verifiability#Burden_of_evidence" title="Wikipedia:Verifiability">removed</a>.</span> <small><i>(April 2011)</i></small> </span></td>
</tr></tbody></table>
<p><b>Memory pools</b>, also called <a href="http://en.m.wikipedia.org/wiki/Memory_allocation#Fixed-size-blocks_allocation" title="Memory allocation" class="mw-redirect">fixed-size-blocks allocation</a>, allow <a href="http://en.m.wikipedia.org/wiki/Dynamic_memory_allocation" title="Dynamic memory allocation" class="mw-redirect">dynamic memory allocation</a> comparable to <a href="http://en.m.wikipedia.org/wiki/Malloc" title="Malloc" class="mw-redirect">malloc</a> or <a href="http://en.m.wikipedia.org/wiki/C%2B%2B" title="C++">C++</a>'s <a href="http://en.m.wikipedia.org/wiki/New_%28C%2B%2B%29" title="New (C++)">operator new</a>. As those implementations suffer from <a href="http://en.m.wikipedia.org/wiki/Fragmentation_%28computer%29" title="Fragmentation (computer)" class="mw-redirect">fragmentation</a> because of variable block sizes, it can be impossible to use them in a <a href="http://en.m.wikipedia.org/wiki/Real-time_computing" title="Real-time computing">real time system</a> due to performance. A more efficient solution is preallocating a number of memory blocks with the same size called the <b>memory pool</b>. The application can allocate, access, and free blocks represented by <a href="http://en.m.wikipedia.org/wiki/Handle_%28computing%29" title="Handle (computing)">handles</a> at <a href="http://en.m.wikipedia.org/wiki/Run_time_%28program_lifecycle_phase%29" title="Run time (program lifecycle phase)">run time</a>.</p>
<p>Many <a href="http://en.m.wikipedia.org/wiki/RTOS#Memory_allocation" title="RTOS" class="mw-redirect">real-time operating systems</a> use memory pools, such as the <a href="http://en.m.wikipedia.org/wiki/Transaction_Processing_Facility" title="Transaction Processing Facility">Transaction Processing Facility</a>.</p>
<p>Some systems, like the web server <a href="http://en.m.wikipedia.org/wiki/Nginx" title="Nginx">Nginx</a>, use the term <i>memory pool</i> to refer to a group of variable-size allocations which can be later deallocated all at once. This is also known as a <i>region</i>; see <a href="http://en.m.wikipedia.org/wiki/Region-based_memory_management" title="Region-based memory management">region-based memory management</a>.</p>
<div class="section"><h2 class="section_heading" id="section_1"><button>Show</button><span id="Sample_memory_pool_implementation">Sample memory pool implementation</span></h2><div class="content_block" id="content_1">
<p>A simple memory pool module can allocate, for example, 3 pools at <a href="http://en.m.wikipedia.org/wiki/Compile_time" title="Compile time">compile time</a>
 with block sizes optimized for the application which deploys the 
module. The application can allocate, access and free memory with the 
following interface:</p>
<ul>
<li>Allocate memory from the pools. The function will determine the pool
 where the required block fits in. If all blocks of that pool are 
already reserved, the function tries to find one in the next bigger 
pool(s). An allocated memory block is represented with a <a href="http://en.m.wikipedia.org/wiki/Handle_%28computing%29" title="Handle (computing)">handle</a>.</li>
<li>Get an access pointer to the allocated memory.</li>
<li>Free the formerly allocated memory block.</li>
<li>The handle can for example be implemented with an unsigned int. The 
module can interpret the handle internally by dividing it into pool 
index, memory block index and a version. The pool and memory block index
 allow fast access to the corresponding block with the handle, while the
 version, which is incremented at each new allocation, allows detection 
of handles whose memory block is already freed (caused by handles 
retained too long).</li>
</ul>
</div><a id="anchor_1" href="#section_1" class="section_anchors back_to_top">↑Jump back a section</a></div><div class="section"><h2 class="section_heading" id="section_2"><button>Show</button><span id="Memory_pool_vs_malloc">Memory pool vs malloc</span></h2><div class="content_block" id="content_2">
<p><b>Benefits</b></p>
<ul>
<li>Memory pools allow memory allocation with constant execution time (no <a href="http://en.m.wikipedia.org/wiki/Fragmentation_%28computer%29" title="Fragmentation (computer)" class="mw-redirect">fragmentation</a>). The memory release for thousands of objects in a pool is just one operation, not one by one if <i>malloc</i> is used to allocate memory for each object.</li>
<li>Memory pools can be grouped in hierarchical tree structures, which is suitable for special programming structures like <a href="http://en.m.wikipedia.org/wiki/Control_flow#Loops" title="Control flow">loops</a> and <a href="http://en.m.wikipedia.org/wiki/Recursion_%28computer_science%29" title="Recursion (computer science)">recursions</a>.</li>
<li>Fixed-size block memory pools do not need to store allocation 
metadata for each allocation, describing characteristics like the size 
of the allocated block. Particularly for small allocations, this 
provides a substantial space savings.</li>
</ul>
<p><b>Drawbacks</b></p>
<ul>
<li>Memory pools may need to be tuned for the application which deploys them.</li>
</ul>
</div><a id="anchor_2" href="#section_2" class="section_anchors back_to_top">↑Jump back a section</a></div><div class="section"><h2 class="section_heading" id="section_3"><button>Show</button><span id="See_also">See also</span></h2><div class="content_block" id="content_3">
<ul>
<li><a href="http://en.m.wikipedia.org/wiki/Memory_Pool_System" title="Memory Pool System">Memory Pool System</a></li>
<li><a href="http://en.m.wikipedia.org/wiki/Free_list" title="Free list">Free list</a></li>
</ul>
</div><a id="anchor_3" href="#section_3" class="section_anchors back_to_top">↑Jump back a section</a></div><div class="section"><h2 class="section_heading" id="section_4"><button>Show</button><span id="References">References</span></h2><div class="content_block" id="content_4">
<ul>
<li><a rel="nofollow" class="external text" href="http://svnbook.red-bean.com/en/1.1/ch08s05.html">Programming with Memory Pools</a></li>
</ul>
</div><a id="anchor_4" href="#section_4" class="section_anchors back_to_top">↑Jump back a section</a></div><div class="section"><h2 class="section_heading" id="section_5"><button>Show</button><span id="External_links">External links</span></h2><div class="content_block" id="content_5">
<ul>
<li><a rel="nofollow" class="external text" href="http://www.pjsip.org/pjlib/docs/html/group__PJ__POOL__GROUP.htm">PJLIB Reference: Fast Memory Pool</a></li>
<li><a rel="nofollow" class="external text" href="http://gee.cs.oswego.edu/dl/html/malloc.html">A Memory Allocator</a></li>
</ul>

</div>
</div>		</div>
	</div>
			<div id="footer">
			<h2 class="section_heading" id="section_footer"><button>Show</button>
		<div class="license">Wikipedia ™</div>		<span class="toggleCopyright">
			<span class="more">more</span><span class="less">less</span>
		</span>
	</h2>
	<div class="content_block" id="content_footer">
		<ul class="settings">
			<li>
				<span class="left separator"><a id="mw-mf-display-toggle" href="http://en.wikipedia.org/w/index.php?title=Memory_pool&amp;mobileaction=toggle_view_desktop">Desktop</a></span><span class="right">Mobile</span>
			</li>
			<li>
				<span class="left"><a href="http://wikimediafoundation.org/wiki/Terms_of_use?useformat=mobile">Terms of Use</a></span><span class="right">Images ON / <a href="http://en.m.wikipedia.org/w/index.php?title=Special:MobileOptions/DisableImages&amp;returnto=Memory+pool&amp;mobiletoken=dc83e2c6ae93b1fadc6882196f529c1b" title="Special:MobileOptions/DisableImages" id="imagetoggle">OFF</a></span>
			</li>
			<li class="notice">
				Article by <a href="http://en.m.wikipedia.org/w/index.php?title=Memory_pool&amp;action=history">contributors</a> like you<br>
				Content available under <a href="http://en.m.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License?useformat=mobile">CC BY-SA 3.0</a>			</li>
		</ul>
		<ul class="links">
			<li>
				<a href="http://en.m.wikipedia.org/w/index.php?title=Special:MobileFeedback&amp;returnto=Memory+pool&amp;feedbacksource=MobileFrontend">Contact</a>
			</li><li>
			<a href="http://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy</a></li><li>
			<a href="http://en.m.wikipedia.org/wiki/Wikipedia:About" title="Wikipedia:About">About</a></li><li>
			<a href="http://en.m.wikipedia.org/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
		</ul>
	</div>
	</div>
				<!--[if gt IE 7]><!-->
		<script type="text/javascript">mw={loader:{state:function(){}}};</script>		<script src="Memory_pool_files/load_002.php" type="text/javascript"></script>
<script src="Memory_pool_files/load.php" type="text/javascript"></script>	<script type="text/javascript">
	window.onload = function() {
		mw.mobileFrontend.init();
	};
	</script>
	<!----><!--[endif]---->
	
	<div style="display: none;" id="mf-references"><div></div><button>close</button></div></body></html>